#{extends 'main.html' /}
#{set title:'Emitir CBB' /}

<div id="header">
	<div class="wrapper">
		
		<div id="logo"><span><img src="#" alt="EmiteCBB"></span></div> <!-- /public/images/logo.gif -->
		
		<ul id="loggedout-nav">
			<li>Emitir</li>
			<li><a href="/validarCBB">Validar CBB</a><sup>&nbsp;&nbsp;Nuevo!</sup></li>
		</ul>
	
	</div>
</div>

<div id="pagebar">
	<div class="wrapper">
		<h1><!-- --></h1>
	</div>
</div>

<!-- START MAIN CONTENT -->
<div id="maincontent">
	<div id="wrapper">
	<div class="container_12">
	#{form @Application.leerCBB(), id: 'leerCBBForm', enctype: 'multipart/form-data' }
		<div class="grid_6 prefix_3 suffix_3">
			<fieldset>
			<legend>IMAGEN CBB</legend>
			</fieldset>
			<input id="cbbLoad" type="file" name="entity" />
			<input id="cbbSubmit" type="submit" style="display: none" />
			<span class="error">#{error 'entity' /}</span>
		</div>
	#{/form}
	#{form @Application.emitir(), id:'emitirComprobanteForm', enctype:'multipart/form-data'}
	<div class="grid_6">
			<fieldset>
			<legend>DATOS DEL EMISOR</legend>
			
			<table class="formtable">
				<tr>
					<th><label for="rfc">RFC:</label></th>
					<td><input type="text" name="comprobante.emisor.rfc" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.rfc' /}</td>
				</tr>
				<tr class="last">
					<th><label for="razonsocial">Razon Social:</label></th>
					<td><input type="text" name="comprobante.emisor.razonsocial" class="textfield" value="" /></td>
					<td class="error"#{error 'emisor.razonsocial' /}</td>
				</tr>
				<tr class="last">
					<th><label for="calle">Calle:</label></th>
					<td><input type="text" name="email" id="comprobante.emisor.calle" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.calle' /}</td>
				</tr>
				<tr class="last">
					<th><label for="noExterior">No. Exterior:</label></th>
					<td><input type="text" name="comprobante.emisor.noExterior" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.noExterior' /}</td>
				</tr>
				<tr class="last">
					<th><label for="noInterior">No. Interior:</label></th>
					<td><input type="text" name="comprobante.emisor.noInterior" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.noInterior' /}</td>
				</tr>
				<tr class="last">
					<th><label for="colonia">Colonia:</label></th>
					<td><input type="text" name="comprobante.emisor.colonia" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.colonia' /}</td>
				</tr>
				<tr class="last">
					<th><label for="codigoPostal">Codigo Postal:</label></th>
					<td><input type="text" name="comprobante.emisor.codigoPostal" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.codigoPostal' /}</td>
				</tr>
				<tr class="last">
					<th><label for="municipio">Municipio:</label></th>
					<td><input type="text" name="comprobante.emisor.municipio" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.municipio' /}</td>
				</tr>
				<tr class="last">
					<th><label for="estado">Estado:</label></th>
					<td><input type="text" name="comprobante.emisor.estado" class="textfield" value="" /></td>
					<td class="error">#{error 'emisor.estado' /}</td>
				</tr>
				<tr class="last">
					<th><label for="pais">Pais:</label></th>
					<td><input type="text" name="comprobante.emisor.pais" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.emisor.pais')}</td>
				</tr>
			</table>
			</fieldset>
		</div>
		<div class="grid_6">
			<fieldset>
			<legend>DATOS DEL CLIENTE</legend>
			
			<table class="formtable">
				<tr>
					<th><label for="rfc">RFC:</label></th>
					<td><input type="text" name="comprobante.cliente.rfc" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.rfc')}</td>
				</tr>
				<tr class="last">
					<th><label for="razonsocial">Razon Social:</label></th>
					<td><input type="text" name="comprobante.cliente.razonsocial" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.razonsocial')}</td>
				</tr>
				<tr class="last">
					<th><label for="calle">Calle:</label></th>
					<td><input type="text" name="email" id="comprobante.cliente.calle" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.calle')}</td>
				</tr>
				<tr class="last">
					<th><label for="noExterior">No. Exterior:</label></th>
					<td><input type="text" name="comprobante.cliente.noExterior" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.noExterior')}</td>
				</tr>
				<tr class="last">
					<th><label for="noInterior">No. Interior:</label></th>
					<td><input type="text" name="comprobante.cliente.noInterior" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.noInterior')}</td>
				</tr>
				<tr class="last">
					<th><label for="colonia">Colonia:</label></th>
					<td><input type="text" name="comprobante.cliente.colonia" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.colonia')}</td>
				</tr>
				<tr class="last">
					<th><label for="codigoPostal">Codigo Postal:</label></th>
					<td><input type="text" name="comprobante.cliente.codigoPostal" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.codigoPostal')}</td>
				</tr>
				<tr class="last">
					<th><label for="municipio">Municipio:</label></th>
					<td><input type="text" name="comprobante.cliente.municipio" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.municipio')}</td>
				</tr>
				<tr class="last">
					<th><label for="estado">Estado:</label></th>
					<td><input type="text" name="comprobante.cliente.estado" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.estado')}</td>
				</tr>
				<tr class="last">
					<th><label for="pais">Pais:</label></th>
					<td><input type="text" name="comprobante.cliente.pais" class="textfield" value="" /></td>
					<td class="error">${errors.forKey('comprobante.cliente.pais')}</td>
				</tr>
			</table>
			</fieldset>
		</div>
	</div>
	
	<div class="container_12">
		<div class="grid_8 prefix_2 suffix_2">
			<fieldset>
			<legend>CONCEPTOS</legend>
			</fieldset>
		</div>
		<div class="row-titles">
			<div class="grid_4">CONCEPTO</div>
			<div class="grid_2">CANTIDAD</div>
			<div class="grid_1">UNIDAD</div>
			<div class="grid_2">PRECIO UNIT.</div>
			<div class="grid_2">IVA (%)</div>
			<div class="grid_1">IMPORTE</div>
		</div>
		<div class="conceptos">
			<div class="row-titles">
				<div class="grid_4"><textarea></textarea></div>
				<div class="grid_2"><input type="text" name="comprobante.conceptos[0].concepto" size="10"></input></div>
				<div class="grid_1"><input type="text" name="comprobante.conceptos[0].cantidad" size="5"></input></div>
				<div class="grid_2"><input type="text" name="comprobante.conceptos[0].unidades" size="10" ></input></div>
				<div class="grid_2"><input type="text" name="comprobante.conceptos[0].precioUnitario" size="10"></input></div>
				<div class="grid_1" align="right">$</div>
			</div>
		</div>
		<div class="container_12">
			
			<div class="prefix_8 grid_2" align="right">SubTotal:</div>
			<div class="grid_2" align="right" style="border-bottom: 1px black solid;">$</div>
			
			<div class="prefix_8 grid_2" align="right">IVA:</div>
			<div class="grid_2" align="right" style="border-bottom: 1px black solid;">$</div>
			
			<div class="prefix_8 grid_2" align="right">Total:</div>
			<div class="grid_2" align="right" style="border-bottom: 1px black solid;">$</div>
			
		</div>
		<div class="container_12">
			<div class="prefix_5 grid_2 suffix_5"><input type="submit" name="submit" value="EMITIR CBB" class="button" /></div>
		</div>
	</div>
	#{/form}
	</div>
</div>
<!-- END MAIN CONTENT -->
<!-- FOOTER -->
<div id="footer">
	<div id="wrapper">
		<p>Copyright SaaSMexico.com | <a href="http://saasmexico.com/">SaaSMexico.com</a> | <a href="http://captivatecnologia.com">Captiva Tecnologia Digital</a></p>
	</div>
</div>

<div id="testingAJAX">

</div>

<script type="text/javascript">
   	$('#cbbLoad').change(function() {
   		$.POST
	});
</script>
